<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>р╣Бр╕Бр╣Йр╣Др╕Вр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в - Expense Tracker</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <h1>ЁЯТ░ Expense Tracker</h1>
      </div>
      <ul class="nav-menu">
        <li><a href="/" class="nav-link">р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в</a></li>
        <li><a href="/dashboard" class="nav-link">р╕ар╕▓р╕Юр╕гр╕зр╕б (р╣Гр╕лр╕бр╣И)</a></li>
        <li><a href="/analytics" class="nav-link">р╕Бр╕гр╕▓р╕Я (р╣Гр╕лр╕бр╣И)</a></li>
        <li><a href="/expenses/summary" class="nav-link">р╕кр╕гр╕╕р╕Ыр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в</a></li>
        <li><a href="/expenses/add" class="btn btn-primary">+ р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в</a></li>
      </ul>
    </div>
  </nav>

  <main class="container">
    <div class="page-header">
      <h2>тЬПя╕П р╣Бр╕Бр╣Йр╣Др╕Вр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в</h2>
      <a href="/" class="btn btn-outline">тЖР р╕Бр╕ер╕▒р╕Ъ</a>
    </div>

    <div class="card">
      <div class="card-body">
        <form method="POST" action="/expenses/<%= expense.id %>?_method=PUT" class="expense-form">
          <div class="form-group">
            <label for="expense_date">ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: <span class="required">*</span></label>
            <input type="date" name="expense_date" id="expense_date" class="form-control" 
                   value="<%= expense.expense_date %>" required>
          </div>

          <div class="form-group">
            <label for="amount">ЁЯТ╡ р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щ (р╕Ър╕▓р╕Ч): <span class="required">*</span></label>
            <input type="number" name="amount" id="amount" class="form-control" 
                   min="0.01" step="0.01" value="<%= expense.amount %>" required>
          </div>

          <div class="form-group">
            <label for="category_id">ЁЯУВ р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И: <span class="required">*</span></label>
            <select name="category_id" id="category_id" class="form-control" required>
              <option value="">р╣Ар╕ер╕╖р╕нр╕Бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И</option>
              <% categories.forEach(cat => { %>
                <option value="<%= cat.id %>" <%= cat.id === expense.category_id ? 'selected' : '' %>>
                  <%= cat.icon %> <%= cat.name %>
                </option>
              <% }); %>
            </select>
          </div>

          <div class="form-group">
            <label for="payment_method">ЁЯТ│ р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ:</label>
            <select name="payment_method" id="payment_method" class="form-control">
              <option value="р╣Ар╕Зр╕┤р╕Щр╕кр╕Ф" <%= expense.payment_method === 'р╣Ар╕Зр╕┤р╕Щр╕кр╕Ф' ? 'selected' : '' %>>ЁЯТ╡ р╣Ар╕Зр╕┤р╕Щр╕кр╕Ф</option>
              <option value="р╕Ър╕▒р╕Хр╕гр╣Ар╕Др╕гр╕Фр╕┤р╕Х" <%= expense.payment_method === 'р╕Ър╕▒р╕Хр╕гр╣Ар╕Др╕гр╕Фр╕┤р╕Х' ? 'selected' : '' %>>ЁЯТ│ р╕Ър╕▒р╕Хр╕гр╣Ар╕Др╕гр╕Фр╕┤р╕Х</option>
              <option value="р╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ" <%= expense.payment_method === 'р╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ' ? 'selected' : '' %>>ЁЯПж р╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ</option>
              <option value="QR Code" <%= expense.payment_method === 'QR Code' ? 'selected' : '' %>>ЁЯУ▒ QR Code</option>
              <option value="р╕нр╕╖р╣Ир╕Щр╣Ж" <%= expense.payment_method === 'р╕нр╕╖р╣Ир╕Щр╣Ж' ? 'selected' : '' %>>ЁЯУМ р╕нр╕╖р╣Ир╕Щр╣Ж</option>
            </select>
          </div>

          <div class="form-group">
            <label for="description">ЁЯУЭ р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф:</label>
            <textarea name="description" id="description" class="form-control" rows="3" 
                      placeholder="р╕гр╕░р╕Ър╕╕р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б (р╕Цр╣Йр╕▓р╕бр╕╡)"><%= expense.description || '' %></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">ЁЯТ╛ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В</button>
            <a href="/" class="btn btn-outline">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</a>
          </div>
        </form>
      </div>
    </div>

    <div class="card card-warning">
      <div class="card-header">
        <h4>тЪая╕П р╕ер╕Ър╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕вр╕Щр╕╡р╣Й</h4>
      </div>
      <div class="card-body">
        <p>р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕ер╕Ър╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕вр╕Щр╕╡р╣Й р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕З</p>
        <form method="POST" action="/expenses/<%= expense.id %>?_method=DELETE" 
              onsubmit="return confirm('р╕Др╕╕р╕Ур╣Бр╕Щр╣Ир╣Гр╕Ир╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕ер╕Ър╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Щр╕╡р╣Й? р╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕Щр╕╡р╣Йр╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕вр╣Йр╕нр╕Щр╕Бр╕ер╕▒р╕Ър╣Др╕Фр╣Й');">
          <button type="submit" class="btn btn-danger">ЁЯЧСя╕П р╕ер╕Ър╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕вр╕Щр╕╡р╣Й</button>
        </form>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 Expense Tracker - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕вр╕Ыр╕гр╕░р╕Ир╕│р╕зр╕▒р╕Щ</p>
    </div>
  </footer>

  <script src="/js/main.js"></script>
</body>
</html>
